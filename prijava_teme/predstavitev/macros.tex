% !TeX root = main.tex
% chktex-file 1
% chktex-file 46
%=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
% General
% \newcommand{\todo}[2][]{\textcolor{red}{\textsc{#1} #2}}
\newcommand{\todo}[2][]{}
\newcommand{\new}[1]{\textcolor{newstuff}{#1}}
\newcommand{\code}[1]{\mathtt{#1}}
\definecolor{superlightgray}{gray}{0.80}
\newcommand{\highlight}[1]{\setlength{\fboxsep}{2pt}\colorbox{superlightgray}{\ensuremath{#1}}}
\newenvironment{ruledfigure}[1][!hbtp]{%
	\begin{figure}[#1]%
		\begin{center}%
		\noindent\rule{\textwidth}{1pt}%
		\small
}{%
	\noindent\rule{\textwidth}{1pt}%
	\end{center}%
	\end{figure}%
}

\newtcbox{\emphbox}{nobeforeafter,colframe=shadecolor,colback=shadecolor,boxrule=0pt,arc=4pt, boxsep=0pt,left=3pt,right=3pt,top=3pt,bottom=3pt,tcbox raise base}
\newtcbox{\emphunderlinebox}{nobeforeafter,colframe=shadecolor,colback=shadecolor,boxrule=0pt,arc=4pt, boxsep=0pt,left=3pt,right=3pt,top=3pt,bottom=1pt,tcbox raise base}

\newcommand{\defeq}{\stackrel{\text{def}}{=}}

%=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
% Named Typing Relations
\newcommand{\ruleform}[1]{\fbox{$#1$}}

% Meta-variables (Types & Constraints)
\newcommand{\tyA}{\mathit{A}}
\newcommand{\tyB}{\mathit{B}}
\newcommand{\ctyC}{\underline{C}}
\newcommand{\ctyD}{\underline{D}}
\newcommand{\sig}{\Sigma}

% Meta-variables (Templates & Equations)
\newcommand{\tmplT}{\mathit{T}}
\newcommand{\eqE}{\mathcal{E}}

% Meta-variables (Values & Computations)
\newcommand{\hcases}{\mathit{h}}
\newcommand{\contin}{\mathit{k}}
\newcommand{\continvar}{f}

\newcommand{\logic}{\ensuremath{\mathcal{L}}}
\newcommand{\fulllogic}{\ensuremath{\mathcal{L}_\text{full}}}
\newcommand{\freelogic}{\ensuremath{\mathcal{L}_\text{free}}}
\newcommand{\eqlogic}{\ensuremath{\mathcal{L}_\text{eq}}}
\newcommand{\emptylogic}{\ensuremath{\mathcal{L}_\emptyset}}
\newcommand{\predlogic}{\ensuremath{\mathcal{L}_\text{pred}}}

%=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
% Unit and Booleans
\newcommand{\unit}{\mathtt{(\,)}}
\newcommand{\true}{\mathtt{true}}
\newcommand{\false}{\mathtt{false}}

% Keywords
\newcommand{\keylet}{\mathtt{let}}
\newcommand{\keyrec}{\mathtt{rec}}
\newcommand{\keyin}{\mathtt{in}}
\newcommand{\keyreturn}{\mathtt{ret}}
\newcommand{\keydo}{\mathtt{do}}
\newcommand{\keyfun}{\mathtt{fun}}
\newcommand{\keyhandle}{\mathtt{handle}}
\newcommand{\keyhandler}{\mathtt{handler}}
\newcommand{\keywith}{\mathtt{with}}
\newcommand{\keyif}{\mathtt{if}}
\newcommand{\keythen}{\mathtt{then}}
\newcommand{\keyelse}{\mathtt{else}}
\newcommand{\keyabsurd}{\mathtt{absurd}}
\newcommand{\op}{\mathit{op}}

%=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
% Code construction
% Term Abstraction
\newcommand{\fun}[2]{\keyfun１茼狃篝稃２琉痨殂狒轱茴鬻泔眄犷潲茚痧禊鄄蓰１芑２义沲蝮轹体茴鬻泔眄犷潲莒弭蝈泯鄞蓰茈妁戾酤茈妁蝈泾１２３茈妁轭４义趱蝾茴鬻泔眄犷潲茯弭躜铨郾蓰茈妁蝈趱蝾１麻钿茴鬻泔眄犷潲茕镡轭潺鄢蓰茈妁滹１莒彐翎蝌秣２茈妁轭３茴鬻泔眄犷潲茆弭翦蜾镡轭潺鄄蓰茈妁滹１莒彐翎蝌秣２茈妁轭
% Conditional
\newcommand{\ifclause}[3]{\keyif１茈妁翳孱２茈妁屐箦３橡弪狒轱茴鬻泔眄犷潲茱疱蜥糸镱鄢蒇茱疠荛骠桢铄祗妍苠聃犰３荛骠桢铄祗妍苠聃犰２１１ǎ博１ǎ不墁３柔钿戾茴鬻泔眄犷潲荀轸梃犷潇妪鄄蓰茈妁鏖翳１茈妁栳钿戾２柔钿戾茴鬻泔眄犷潲苠眇豉桡狍弩茴殪茴鬻泔眄犷潲荑犷潇弪鄄蒇茯弭躜茼狃篝氵蜉茈妁栳钿戾芑１２吁怏糸趱糸镱茴鬻泔眄犷潲荏踱簖鄄蓰１埯２蔟茴鬻泔眄犷潲荏踱箧矧ソ江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江篷踽糸镱犷翦眇灬翦泔铙趄蹉糸镱茴鬻泔眄犷潲茯屐荏轫茴鬻泔眄犷潲荇羼牾溏屙孱酏鄄蓰１荟溽箬２茴鬻泔眄犷潲荇鲠蝮茼狒梏酐邶茴鬻泔眄犷潲荇孱鲮镱琮鄄蓰１畸２茴鬻泔眄犷潲荇孱鳊荇孱鲮镱琨茔豇荇鲠蝮茴鬻泔眄犷潲荇栳钿戾鄢蒇栎２蓿饼埯３蔟ボ铄縻镯磲钿荇箦龛犷潇妪鄄蒇容莒祓狎孱翳弩轶２茯蝠狎孱翳弩轶摞１ボ铄縻镯磲钿荇牦屙栳钿戾鄞蒇容莒祓狎孱翳弩轶荀骠屙痨狒遨３蓰４荏殓茯蝠狎孱翳弩轶摞１茴鬻泔眄犷潲茯弩疱泗簖鄣蒇茔豇蓰１荟溽箬２茱骠疱４茔狍弩麸５芑茼狒梵纣蝈箴邈趔芑３赠疱茴鬻泔眄犷潲荇疱鲠螨荇狨茴鬻泔眄犷潲茆犷琮↓茴鬻泔眄犷潲荀轸桢颀茴鬻泔眄犷潲茔豉疱鄢蓰荛骠桢铄祗妍苠聃犰３１茆犷纾昌１茆犷纾曹鏖翳羼３茴鬻泔眄犷潲茔豉疱忉箝泯茔豉疱荇笼荏殓苠衽茴鬻泔眄犷潲荏弭郾蓰茺１荦茴鬻泔眄犷潲茆镲祠疱茼狒梏酐怙镬茴鬻泔眄犷潲荛铘豉疱茼狒梏酐轭酏茴鬻泔眄犷潲荃铋趑疱茼狒梏酐躅轸茴鬻泔眄犷潲苠眇豉豉疱茼狒梏酐屙痿茴鬻泔眄犷潲茚铢豉疱茼狒梏酐茼犭遽綮弭翦茴鬻泔眄犷潲荏躔弪轫痫箦鄄蓰茱镝扉珙茯衢箦插荑怙ぃ避梨轵篝镦赭铮菠茔蜍桄殪茯衢箦插荑怙ぃ避荔邈镱滹骠黠２荑骈燔泸茼犭遽麸翳弪茴鬻泔眄犷潲茔狍弩麸茼狒栩屐茼狒桊犰弭翦荏躔弪轫痫箦茯殓梏栳蝠镲铛瘕茯殓梏栳蝠镲钿秣铨茴鬻泔眄犷潲荑麸芤殓梏狎蝻鼾赠疱汨邈腴铉茴鬻泔眄犷潲荀驺豇郾蓰荟溽箬１茱骠疱茼狒梵纣泗茴鬻泔眄犷潲荀骠泗郾蓰荟溽箬１茱骠疱茼狒梵纣翥豇茴鬻泔眄犷潲荀骣豉疱郾蓰荟溽箬１茱骠疱茼狒梵纣鲷疱茴鬻泔眄犷潲荀驺豉疱郾蓰荟溽箬１茱骠疱茼狒梵纣泗疱茴鬻泔眄犷潲荀骟殓郾蓰荟溽箬１茱骠疱茼狒梵纣箝琮茴鬻泔眄犷潲荀骠屙痨狒妪鄢蒇荇孱鲚１荟溽箬２茱骠疱３茴鬻泔眄犷潲荀驽聃狒轱铙鄄蓰荟溽箬１茱骠疱２茴鬻泔眄犷潲荀屐祠疱潺鄢蒇茔豇蓰１荟溽箬２茱骠疱３茴鬻泔眄犷潲茱骠疱堋很↓茴鬻泔眄犷潲荜蹁珏礤铘鄢蓰１荟溽箬２茱骠疱３吁怍痖铉茴鬻泔眄犷潲荏踱豉疱镦莒羼橡弪狒轱钺箦磲铘殂茴鬻泔眄犷潲苠鲠忑苣秣钺蝌秣茴鬻泔眄犷潲茴殪苠眇豉箦酏茴鬻泔眄犷潲荏磲祆篝屦鄄蓰１莒遽潴麸２ソ江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江田玳泱茴鬻泔眄犷潲莒羼踽忑苠聃轹茴鬻泔眄犷潲苠耜蹁琮鄞蒇茔豇蓰１荟溽箬２莒羼踽爝４３茴鬻泔眄犷潲莒牾溏屙孱酏鄢蓰荛骠桢铄祗妍苠聃犰２１荟溽箬３１荟箦２荟溽箬３茴鬻泔眄犷潲荑痫苄箝茴鬻泔眄犷潲莒趄蹂荇镳茴鬻泔眄犷潲莒驷祗妪茆雉茴鬻泔眄犷潲莒铄琮茴彗茯孱鬻泔眄犷潲莒犷潺荀邃珏茯孱鬻泔眄犷潲莒矧荟邋茴鬻泔眄犷潲莒轫痨殄簖芤殓梏狎蝻鼾茴鬻泔眄犷潲莒犰忑苕犰忑茴鬻泔眄犷潲莒屮轶趔苠簖茴鬻泔眄犷潲莒牦屙鄢蓰荏屙莒牾溏屙孱酐１２３ソ江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江腻铒翎糸镱犰渝磲铘殂茴鬻泔眄犷潲莒殒酏鄄蒇蓰茼狒梵纣扉骠啕１２茴鬻泔眄犷潲荛铘弪瘕鄄蓰茼狒梵纣轭翦蝠啕１ǎ博茴鬻泔眄犷潲苕蝈迳铘弪瘕鄄蓰七１２茴鬻泔眄犷潲荛铞犰荇屮酐轭啕茈妁蝈趱蝾茴鬻泔眄犷潲荛铒瘕郾蒇镳蓰荇屮酐轭啕茼狒栝酐１茴鬻泔眄犷潲荏屙则蹂茼狒栩睇糗◆茴鬻泔眄犷潲荏屙漆祗妪茼狒栩睇骀茴鬻泔眄犷潲茔豇芮犴磲柔钿戾箴邈獒篝蹑茴鬻泔眄犷潲荏屙汜箦簖荇殪溴椠茴鬻泔眄犷潲茱泱茼狒栝酐镢簖渝磲铘殂怛徙脲趔茴鬻泔眄犷潲荏屙郾蓰莒焘蜥汶弭１茯蜮蜥汶弭茴鬻泔眄犷潲荜箦睚鄢蓰莒焘蜥汶弭荜蹁珏礤铘１２３茯蜮蜥汶弭茴鬻泔眄犷潲荑箦睚鄄蒇容荏屙２摞１ソ江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江蔑铘屮趱犰羼蹰鲠戾钽茴鬻泔眄犷潲苊盆镬妪郾蓰莒犷珈１茯犷珈妪茴鬻泔眄犷潲苊砰铙翎铘獒翦鄄蓰１苊盆镬妍２茴鬻泔眄犷潲苊碰狎茼狒桠恹谬茴鬻泔眄犷潲茔豇羼蹰鳊鄞蒇茔豇蓰荜蹁珏礤铘１２茔镱３４ソ江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江江烷筱茴鬻泔眄犷潲莒犴怃徭躅鄢蓰莒犴怃猁１荛铥２墁墁３茴鬻泔眄犷潲荟箦瘕芑芑茴鬻泔眄犷潲荃铋镱茔躔茴鬻泔眄犷潲莛蝻赍泗轱铨莛辇茴鬻泔眄犷潲芪锡茼狒桠恹锡茴鬻泔眄犷潲苠簖郾蓰苠轶趔１茴鬻泔眄犷潲苕犰忑郾蓰苕矧犰禧１茴鬻泔眄犷潲茔镱汜酏芑荑狒芑茴鬻泔眄犷潲荇徕荑箴徙妍稠睚